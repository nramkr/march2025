<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treasure Hunt Puzzle</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f8f9fa;
        }

        .container {
            width: 90%;
            max-width: 600px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            text-align: center;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .poem, .clue {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 15px;
            white-space: pre-wrap;
        }

        input[type="text"] {
            width: 80%;
            padding: 10px;
            font-size: 1.2rem;
            border: 1px solid #ccc;
            border-radius: 5px;
            text-align: center;
        }

        .buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }

        button {
            padding: 10px 15px;
            font-size: 1rem;
            border: none;
            border-radius: 5px;
            background: #007bff;
            color: white;
            cursor: pointer;
        }

        button:disabled {
            background: gray;
            cursor: not-allowed;
        }

        #clueText {
            display: none;
            font-size: 1rem;
            color: #d9534f;
            margin-top: 10px;
            word-wrap: break-word;
        }

        #finalResults {
            display: none;
            margin-top: 20px;
        }

        @media (max-width: 480px) {
            .container {
                width: 95%;
                padding: 15px;
            }

            .poem, .clue {
                font-size: 1rem;
            }

            input[type="text"] {
                width: 90%;
                font-size: 1rem;
            }

            .buttons {
                flex-direction: column;
                gap: 5px;
            }

            button {
                font-size: 0.9rem;
                padding: 8px;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <h2>Puzzle <span id="puzzleNumber">1</span></h2>
        <p class="poem" id="poem"></p>
        <input type="text" id="answerInput" placeholder="Enter your answer">
        <p id="clueText"></p>
        <div class="buttons">
            <button id="submitBtn" onclick="checkAnswer()">Submit</button>
            <button id="clueBtn" onclick="showClue()">Clue</button>
            <button id="revealBtn" onclick="revealAnswer()" style="display: none;">Reveal Answer</button>
            <button id="nextBtn" onclick="nextPuzzle()" style="display: none;">Next Puzzle</button>
        </div>
        <div id="finalResults"></div>
    </div>

    <script>
        const puzzles = [
            {
                poem: "Five young sleuths, adventure unfolds,<br />Hidden treasures, secrets untold.<br />Coastal islands, smugglers in sight,<br />Solving mysteries, making things right.",
                answer: ["famous five", "the famous five"],
                clue: "A dog named Timmy<br />leads the way to truth."
            },
            {
                poem: "A world divided, darkness grows,<br />A soldier rises, power flows.<br />Light and shadow, battle untold,<br />A stag's gift, a fate foretold.",
                answer: ["shadow and bone"],
                clue: "A Grisha girl discovers<br />her hidden sunlit power."
            },
            {
                poem: "A fight to live, a brutal game,<br />The odds are low, the risks the same.<br />One girl defies, a world in sight,<br />A mockingbird takes its flight.",
                answer: ["hunger games", "the hunger games"],
                clue: "The Capitol's deadly game<br />leaves only one standing."
            }
        ];

        let currentPuzzle = 0;
        let attempts = 0;
        let clueUsed = false;
        let revealUsed = false;
        let results = [];

        function displayPuzzle() {
            document.getElementById("poem").innerHTML = puzzles[currentPuzzle].poem;
            document.getElementById("puzzleNumber").textContent = currentPuzzle + 1;
            document.getElementById("clueText").style.display = "none";
            document.getElementById("answerInput").value = "";
            document.getElementById("answerInput").style.display = "block";
            document.getElementById("submitBtn").style.display = "inline-block";
            document.getElementById("clueBtn").style.display = "inline-block";
            document.getElementById("revealBtn").style.display = "none";
            document.getElementById("nextBtn").style.display = "none";
            attempts = 0;
            clueUsed = false;
            revealUsed = false;
        }

        function checkAnswer() {
            let userAnswer = document.getElementById("answerInput").value.toLowerCase().trim();
            if (puzzles[currentPuzzle].answer.includes(userAnswer)) {
                results.push({ ...puzzles[currentPuzzle], attempts, clueUsed, revealUsed });
                document.getElementById("submitBtn").style.display = "none";
                document.getElementById("clueBtn").style.display = "none";
                document.getElementById("nextBtn").style.display = "inline-block";
            } else {
                attempts++;
                if (attempts >= 10) {
                    document.getElementById("revealBtn").style.display = "inline-block";
                }
            }
        }

        function showClue() {
            document.getElementById("clueText").innerHTML = puzzles[currentPuzzle].clue;
            document.getElementById("clueText").style.display = "block";
            clueUsed = true;
        }

        function revealAnswer() {
            document.getElementById("answerInput").value = puzzles[currentPuzzle].answer[0];
            document.getElementById("revealBtn").style.display = "none";
            revealUsed = true;
        }

        function nextPuzzle() {
            currentPuzzle++;
            if (currentPuzzle < puzzles.length) {
                displayPuzzle();
            } else {
                showFinalResults();
            }
        }

        function showFinalResults() {
            let resultHTML = "<h2>Final Results</h2><table border='1'><tr><th>Poem</th><th>Answer</th><th>Attempts</th><th>Clue Used</th><th>Revealed</th></tr>";
            results.forEach(r => {
                resultHTML += `<tr><td>${r.poem}</td><td>${r.answer[0]}</td><td>${r.attempts}</td><td>${r.clueUsed}</td><td>${r.revealUsed}</td></tr>`;
            });
            resultHTML += "</table>";
            document.querySelector(".container").innerHTML = resultHTML;
        }

        displayPuzzle();
    </script>

</body>
</html>
